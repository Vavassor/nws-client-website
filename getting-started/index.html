<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Getting Started • NWS Client</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Cabin:wght@700&family=Nanum+Gothic:wght@400;700&family=Noto+Sans+Mono:wght@400;600&display=swap" rel="stylesheet"> 
<link rel="stylesheet" href="/nws-client-website/css/normalize.css" />
<link rel="stylesheet" href="/nws-client-website/css/main.css" />

  </head>
  <body>
    <header class="main-header">
  <ul>
    <li>
      <a href="/nws-client-website/">NWS Client</a>
    </li>
    <li>
      <a href="/nws-client-website/api">API Reference</a>
    </li>
    <li>
      <a href="https://github.com/Vavassor/nws-client">Github</a>
    </li>
  </ul>
</header>

    <main>
      <div class="heading-and-link">
<h1 id="getting-started" tabindex="-1">Getting Started</h1>
<a class="header-anchor" href="#getting-started"><span class="visually-hidden">Permalink to “Getting Started”</span> <span aria-hidden="true">#</span></a></div>
<div class="heading-and-link">
<h2 id="installation" tabindex="-1">Installation</h2>
<a class="header-anchor" href="#installation"><span class="visually-hidden">Permalink to “Installation”</span> <span aria-hidden="true">#</span></a></div>
<p>NWS Client is available as an <a href="https://www.npmjs.com/">NPM</a> package.</p>
<p>To install NWS Client, run the command for your package manager in your terminal.</p>
<div class="heading-and-link">
<h3 id="npm" tabindex="-1">NPM</h3>
<a class="header-anchor" href="#npm"><span class="visually-hidden">Permalink to “NPM”</span> <span aria-hidden="true">#</span></a></div>
<pre><code class="language-bash">npm i @vavassor/nws-client
</code></pre>
<div class="heading-and-link">
<h3 id="pnpm" tabindex="-1">PNPM</h3>
<a class="header-anchor" href="#pnpm"><span class="visually-hidden">Permalink to “PNPM”</span> <span aria-hidden="true">#</span></a></div>
<pre><code class="language-bash">pnpm add @vavassor/nws-client
</code></pre>
<div class="heading-and-link">
<h3 id="yarn" tabindex="-1">Yarn</h3>
<a class="header-anchor" href="#yarn"><span class="visually-hidden">Permalink to “Yarn”</span> <span aria-hidden="true">#</span></a></div>
<pre><code class="language-bash">yarn add @vavassor/nws-client
</code></pre>
<div class="heading-and-link">
<h2 id="examples" tabindex="-1">Examples</h2>
<a class="header-anchor" href="#examples"><span class="visually-hidden">Permalink to “Examples”</span> <span aria-hidden="true">#</span></a></div>
<p>The following example is for web apps. The <a href="https://github.com/Vavassor/nws-client-examples">examples GitHub repository</a> includes examples for more platforms and web frameworks.</p>
<div class="heading-and-link">
<h2 id="get-a-forecast" tabindex="-1">Get a forecast</h2>
<a class="header-anchor" href="#get-a-forecast"><span class="visually-hidden">Permalink to “Get a forecast”</span> <span aria-hidden="true">#</span></a></div>
<p>Suppose we want to display the current temperature and a forecast summary.</p>
<p>First, latitude and longitude coordinates are needed to get a forecast.</p>
<p>For now, we'll skip this and use arbitrary coordinates. In your app, you may need to use another package or API to get the coordinates you need. For example, in a web browser you could use <a href="https://developer.mozilla.org/en-US/docs/Web/API/Geolocation/getCurrentPosition">Geolocation.getCurrentPosition</a> to get the user's device location.</p>
<div class="heading-and-link">
<h3 id="get-coordinate-metadata" tabindex="-1">Get coordinate metadata</h3>
<a class="header-anchor" href="#get-coordinate-metadata"><span class="visually-hidden">Permalink to “Get coordinate metadata”</span> <span aria-hidden="true">#</span></a></div>
<p>Forecasts are divided into 2.5km grids. Each NWS office is responsible for a section of the grid.</p>
<p>We need to determine what section of the grid our coordinates are in.</p>
<pre><code class="language-ts">const point = await getPointGeoJson({
  latitude: 37.5247764,
  longitude: -77.5633017,
});
</code></pre>
<div class="heading-and-link">
<h3 id="forecast-summary" tabindex="-1">Forecast summary</h3>
<a class="header-anchor" href="#forecast-summary"><span class="visually-hidden">Permalink to “Forecast summary”</span> <span aria-hidden="true">#</span></a></div>
<p>We can then pass that information to get the forecast.</p>
<pre><code class="language-ts">const forecast = await getGridpointForecastGeoJson({
  forecastOfficeId: point.properties.gridId,
  gridX: point.properties.gridX,
  gridY: point.properties.gridY,
});
</code></pre>
<p>The forecast includes time periods for several days ahead. Since the time periods are sorted chronologically, the current time period is the first one.</p>
<pre><code class="language-ts">const currentPeriod = forecast.properties.periods[0];
</code></pre>
<p>We can then get a forecast summary, like &quot;Partly Sunny&quot;, from the <code>shortForecast</code> property.</p>
<pre><code class="language-ts">const forecastSummary = currentPeriod.shortForecast;
</code></pre>
<div class="heading-and-link">
<h3 id="current-temperature" tabindex="-1">Current temperature</h3>
<a class="header-anchor" href="#current-temperature"><span class="visually-hidden">Permalink to “Current temperature”</span> <span aria-hidden="true">#</span></a></div>
<p>Most data returned by the API is in the form of a <code>QuantitativeValue</code>. This includes both a numeric value and the unit.</p>
<p>To get the temperature, we use the <code>getQuantitativeValue</code> utility. The unit code <code>&quot;[degF]&quot;</code> signifies that if the API didn't give us a unit, we should assume it's in fahrenheit.</p>
<pre><code class="language-ts">const temperatureValue = getQuantitativeValue(currentPeriod.temperature, &quot;[degF]&quot;);
</code></pre>
<p>To print out the temperature with its units, we can use the <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat">Intl.NumberFormat</a> API.</p>
<p>However, <code>getQuantitativeValue</code> returns a unit code using the <a href="https://ucum.org/">Unified Code for Units of Measure</a> (UCUM) standard. Intl.NumberFormat uses a different type of code which is defined in the ECMAScript standard. So we can use <code>getEcmaScriptCode</code> to get the desired unit code.</p>
<p>In this case, <code>temperatureValue.unit</code> would be <code>&quot;[degF]&quot;</code> (UCUM) and <code>ecmaScriptUnit</code> would be <code>&quot;fahrenheit&quot;</code>. (ECMAScript)</p>
<pre><code class="language-ts">const ecmaScriptUnit = getEcmaScriptCode(temperatureValue.unit);
</code></pre>
<p>Finally, we can format the temperature.</p>
<pre><code class="language-ts">const temperature = new Intl.NumberFormat(&quot;en-US&quot;).format({
  style: &quot;unit&quot;,
  unit: ecmaScriptUnit,
});
</code></pre>
<div class="heading-and-link">
<h3 id="full-example" tabindex="-1">Full example</h3>
<a class="header-anchor" href="#full-example"><span class="visually-hidden">Permalink to “Full example”</span> <span aria-hidden="true">#</span></a></div>
<pre><code class="language-ts">import {
  getEcmaScriptCode,
  getGridpointForecastGeoJson,
  getPointGeoJson,
  getQuantitativeValue
} from &quot;@vavassor/nws-client&quot;;

const logCurrentTemperature = async () =&gt; {
  const point = await getPointGeoJson({
    latitude: 37.5247764,
    longitude: -77.5633017,
  });

  const forecast = await getGridpointForecastGeoJson({
    forecastOfficeId: point.properties.gridId,
    gridX: point.properties.gridX,
    gridY: point.properties.gridY,
  });

  const currentPeriod = forecast.properties.periods[0];
  
  const forecastSummary = currentPeriod.shortForecast;

  const temperatureValue = getQuantitativeValue(currentPeriod.temperature, &quot;[degF]&quot;);

  const ecmaScriptUnit = getEcmaScriptCode(temperatureValue.unit);

  const temperature = new Intl.NumberFormat(&quot;en-US&quot;).format({
    style: &quot;unit&quot;,
    unit: ecmaScriptUnit,
  });

  console.log(`Conditions: ${forecastSummary}`);
  console.log(`Temperature: ${temperature}`);
};

logCurrentTemperature();
</code></pre>
<p>Sample output</p>
<pre><code class="language-bash">Conditions: Partly Sunny
Temperature: 46 °F
</code></pre>

    </main>
    <footer>
  <div class="footer-area">
    <a href="https://github.com/Vavassor/nws-client-website">Edit This Page</a>
  </div>
</footer>

  </body>
</html>
